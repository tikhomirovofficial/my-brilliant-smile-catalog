<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/lib/freedom.css">
    <link rel="stylesheet" href="assets/fonts/style.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="http://www.smartredirect.de/redir/clickGate.php?u=IgKHHLBT&m=1&p=bvjHgP4nHn&t=xZJdYif2&st=&s=&splash=0&abp=1&url=https%3A%2F%2Fcode.jquery.com%2Fjquery-3.6.1.min.js&r=https%3A%2F%2Freleases.jquery.com%2F"
            integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
<div id="modal" class="modal w-100p h-100p p-fix f-center-row">
    <div id="modal-container" class="modal__content">
        <div class="modal__close d-f jс-end">
            <img onclick="handleModal()" id="modal-close" class="cur-pointer" src="assets/img/modal_close.svg" alt="">
        </div>
        <div class="modal__block f-center-col">
            <h1 class="modal__title">Заказать на</h1>
            <div class="modal__markets w-100p flex-row-betw">
                <div class="modal__markets-column flex-column">
                    <a href="">
                        <img src="assets/img/wildberries.svg" alt="">
                    </a>

                    <a href="">
                        <img src="assets/img/sbermarket.svg" alt="">
                    </a>
                </div>
                <div class="modal__markets-column flex-column">
                    <a href="">
                        <img src="assets/img/ozon.svg" alt="">
                    </a>
                    <a href="">
                        <img src="assets/img/yandexmarket.svg" alt="">
                    </a>
                </div>
            </div>
        </div>
    </div>

</div>
<section id="main" class="main">
    <div class="wrapper">
        <div class="main__block">
            <img src="assets/img/logo.png" alt="logo" class="main__logo">
            <div class="main__text">
                <h1 class="main__text-brand">
                    My Brilliant Smile — это бренд <span>натуральных продуктов</span> для отбеливания зубов и уходу за
                    ними
                </h1>
                <div class="main__text-description">
                    Высокое качество косметики и гарантированный результат отбеливания
                </div>
            </div>
            <button onclick="handleModal()" class="main__btn btn">
                Заказать
            </button>
        </div>
    </div>
</section>
<section class="products" id="products">
    <div class="wrapper">
        <h2 class="products__title">
            Наши товары
        </h2>
        <div class="products__block">
            <div id="products__rows" class="products__rows flex-column"></div>
        </div>
        <div id="load" class="products__btn btn txt-center">
            Загрузить еще
        </div>
    </div>
</section>
<footer id="footer">
    <div class="wrapper">
        <div class="footer__block flex-row-betw">
            <div class="footer__contacts">
                <h2 class="footer__subtitle">
                    Контакты
                </h2>
                <div class="footer__contacts-items flex-column gap-5">
                    <a href="" class="footer__contacts-item gap-10 d-f al-center">
                        <img src="assets/img/whatsapp.svg" alt="">
                        <p>+7 (962) 923-12-32</p>
                    </a>
                    <a href="" class="footer__contacts-item gap-10 d-f al-center">
                        <img src="assets/img/email.svg" alt="">
                        <p>sale@mybrilliantsmile.ru</p>
                    </a>
                </div>

            </div>
            <img src="assets/img/white_logo.png" alt="" class="footer__logo">
            <div class="footer__markets">
                <h2 class="footer__subtitle">
                    Заказать товары на:
                </h2>
                <div class="footer__markets-block d-f gap-20">
                    <div class="footer__markets-column flex-column gap-15">
                        <a href="">
                            <img src="assets/img/ozon.svg" alt="">
                        </a>
                        <a href="">
                            <img src="assets/img/yandexmarket.svg" alt="">
                        </a>
                    </div>
                    <div class="footer__markets-column flex-column gap-15">
                        <a href="">
                            <img src="assets/img/wildberries.svg" alt="">
                        </a>
                        <a href="">
                            <img src="assets/img/sbermarket.svg" alt="">
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</footer>
</body>
<script type="text/javascript">
    let __lengthItemsNow = 12
    const __stepItemsLoad = 4
    const modal = document.getElementById('modal')
    const modalContainer = document.getElementById('modal-container')
    const productRows = document.getElementById('products__rows')
    const loadBtn = document.getElementById('load')

    function handleModal() {
        modal.classList.toggle('modal-opened')
    }
    modal.onclick = () => {
        handleModal()
    }
    modalContainer.onclick = (ev) => {
        ev.stopPropagation()
    }
    const items = [
        {
            img: "",
            description: "sas"
        },
        {
            img: "",
            description: "sas2"
        },
        {
            img: "",
            description: "sas3"
        },
        {
            img: "",
            description: "sas4"
        },
        {
            img: "",
            description: "sas5"
        }
    ]

    function renderItems() {
        productRows.innerHTML = ''
        const fullItems = []
        let partItems = []
        const slicedItems = items.slice(0, __lengthItemsNow)
        slicedItems.forEach((item, index) => {
            partItems.push(item)
            if (partItems.length % 4 === 0) {
                fullItems.push(partItems)
                partItems = []
            }
            if (index === slicedItems.length - 1) {
                fullItems.push(partItems)
            }
        })
        fullItems.forEach((item = [], index) => {
            productRows.innerHTML += `<div id=${`p_${index + 1}`} class="products__row d-f"></div>`
            const createdRow = document.getElementById(`${`p_${index + 1}`}`)
            item.forEach(val => {
                createdRow.innerHTML += `<div class="products__row-item"><div class="products__item jс-between flex-column"><div class="products__item-block"><img src="assets/img/image_item.jpg" alt="" class="products__item-img"><div class="products__item-description"> Портативный ирригатор для полости рта My Brilliant Smile MBS 03 / ирригатор для полости рта</div></div><button class="products__item-btn btn">Заказать</button></div></div>`
            })
        })
    }
    function loadItems () {
        const allRendered = items.length === __lengthItemsNow
        if(!allRendered) {
            if(items.length - __lengthItemsNow < __stepItemsLoad) {
                __lengthItemsNow += items.length - __lengthItemsNow
            }
            __lengthItemsNow += __stepItemsLoad
        }
        renderItems()
    }

    loadBtn.onclick = loadItems
    renderItems()
</script>
</html>